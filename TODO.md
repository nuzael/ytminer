# YTMiner Roadmap / TODO

## Phase 1 — Data Enrichment (Transcripts)
- [x] Implement transcript retrieval for public videos via YouTube timedtext endpoint
  - [x] Preferred languages from env (e.g., `en,pt,es`)
  - [x] Fallback to auto-generated captions when available
  - [x] Basic VTT/XML to plain text parsing
  - [x] Robust error handling and telemetry (basic)
- [x] CLI/Interactive option to enable/disable transcript fetching
- [x] Store transcript metadata (video_id, language, source, has_autogenerated) in-memory for now
- [ ] Add unit tests for XML parsing and language fallback

## Phase 2 — Temporal Persistence
- [ ] Introduce persistence layer (SQLite by default) for daily metrics snapshots
  - [ ] Schema: `video_metrics_daily(video_id, date, views, likes, comments)`
  - [ ] Background job/scheduled task to refresh recent videos (e.g., last 30–90 days)
  - [ ] Upsert semantics, idempotency, and API quota awareness
- [ ] Feature calculations from daily series
  - [ ] VPD7, VPD30, slope (linear regression), half-life
  - [ ] like_rate, comment_rate, freshness (age bucket)

## Phase 3 — Embeddings & Clustering
- [ ] Generate text embeddings (title + description + transcript)
  - [ ] Pluggable embedding provider (local/remote)
- [ ] Vector index (FAISS or alternative) and cluster assignment (KMeans/HDBSCAN)
- [ ] Cluster stats (size, median/mean VPD, top tokens/entities)
- [ ] Gap analysis (performance vs saturation)

## Phase 4 — Opportunity Scoring
- [x] Define a first-pass Opportunity Score (sample-level, in-memory)
  - [ ] Normalize features per cluster (z-scores) — planned (Phase 3 dependency)
  - [x] Penalize saturation via simple token frequency in current sample
  - [x] Expose weights via config/env
- [x] Ranking view and explanations (why this is recommended)

## Phase 5 — UX & Docs
- [ ] Add “Emerging Now”, “Gaps”, and “Cluster Leaders” views
- [ ] Update interactive flows to include transcript toggle and insights
- [ ] Expand docs with methodology for transcripts, series, and scoring

## Nice-to-haves
- [ ] Whisper ASR fallback when no captions available (opt-in)
- [ ] Thumbnail OCR and title heuristics (numbers/power words/curiosity)
- [ ] Comment sentiment and question mining 